<html>
    <div class="column center container">
        <newTodo class="margin-bottom-20px" on:newTask="addTask" />
        <todo on:remove="removeTask" class="margin-top-20px" #for(task in tasks) :task="task" />
    </div>
</html>
<script>
import {Component, Reactive, Children} from "mahal";
import Todo from "./todo.mahal";
import NewTodo from "./new-todo.mahal";

@Children({
    'todo':Todo,
    'newTodo':NewTodo
})
export default class Root extends Component {

    uniqueId=0;

    @Reactive
    tasks = [];

    constructor(){
        super();
        this.on("rendered",this.onRendered.bind(this))
    }

    onRendered(){
        this.addTask({
            title:"Buy shoe",
            description:"Buy a canvas shoe from Myntra"
        })
    }

    addTask(task){
        task.id = ++this.uniqueId;
        this.tasks.push(task);
    }

    removeTask(id){
        const index = this.tasks.findIndex(q=> q.id===id);
        if(index>=0){
            this.tasks.splice(index,1);
        }
    }
}
</script>
<style>
.container{
    max-width:500px;
    margin-top:50px;
}
</style>